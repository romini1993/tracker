<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multi-Chain Tracker - Bro Minas</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-[#0a0a0c] text-slate-200 min-h-screen p-4 md:p-10 font-sans">

    <div class="max-w-4xl mx-auto">
        <div class="flex justify-between items-end mb-8">
            <div>
                <h1 class="text-3xl font-black text-white italic tracking-tighter">MINAS SCANNER</h1>
                <p class="text-slate-500 text-xs">ETH, BSC, POLYGON, ARB, OP, AVAX, BASE, MANTA, MANTLE, ZKSYNC</p>
            </div>
            <button id="btnCopy" onclick="copyData()" class="hidden bg-blue-600 hover:bg-blue-500 text-white px-5 py-2 rounded-lg font-bold text-xs transition-all">
                COPY DATA
            </button>
        </div>

        <div class="bg-[#16161a] p-6 rounded-2xl border border-white/5 mb-6 shadow-2xl">
            <div class="flex flex-col md:flex-row gap-3">
                <input id="addr" type="text" placeholder="Paste Address 0x..." 
                    class="flex-1 bg-[#1f1f23] border border-white/10 p-4 rounded-xl focus:outline-none focus:border-blue-500 text-white font-mono shadow-inner">
                <button onclick="scanSekarang()" class="bg-white text-black hover:bg-blue-400 hover:text-white px-8 py-4 rounded-xl font-black transition-all transform active:scale-95">
                    SCAN KOIN
                </button>
            </div>
        </div>

        <div id="loader" class="hidden text-center py-10">
            <div class="animate-spin rounded-full h-10 w-10 border-t-2 border-blue-500 mx-auto mb-4"></div>
            <p class="text-blue-400 font-bold animate-pulse">Lagi nyari koin di semua network, sabar Bro...</p>
        </div>

        <div class="bg-[#16161a] rounded-2xl border border-white/5 overflow-hidden shadow-2xl">
            <table class="w-full text-left border-collapse">
                <thead class="bg-white/5 text-[10px] uppercase font-bold text-slate-500 tracking-widest">
                    <tr>
                        <th class="p-4">Network</th>
                        <th class="p-4">Token</th>
                        <th class="p-4 text-right">Balance</th>
                        <th class="p-4">Contract</th>
                    </tr>
                </thead>
                <tbody id="hasil">
                    <tr><td colspan="4" class="p-16 text-center text-slate-600 italic">Address belum di-scan, Bro.</td></tr>
                </tbody>
            </table>
        </div>
    </div>

    <script>
        let koinData = [];

        async function scanSekarang() {
            const address = document.getElementById('addr').value.trim();
            const tableBody = document.getElementById('hasil');
            const loader = document.getElementById('loader');
            const btnCopy = document.getElementById('btnCopy');

            if (!address.startsWith('0x')) return alert('Address salah tuh, Bro!');

            tableBody.innerHTML = '';
            loader.classList.remove('hidden');
            btnCopy.classList.add('hidden');
            koinData = [];

            // Kita pake API dari Ethplorer & beberapa public source yang lebih open
            try {
                // Fetching via Ethplorer (Mainnet Fokus tapi open banget)
                const res = await fetch(`https://api.ethplorer.io/getAddressInfo/${address}?apiKey=freekey`);
                const data = await res.json();
                
                loader.classList.add('hidden');

                if (data.ETH) {
                    tambahKoin('ETH', 'Ethereum', data.ETH.balance, 'Native');
                }

                if (data.tokens) {
                    data.tokens.forEach(t => {
                        const bal = t.balance / Math.pow(10, t.tokenInfo.decimals);
                        if (bal > 0.0001) {
                            tambahKoin(t.tokenInfo.symbol, 'Ethereum', bal, t.tokenInfo.address);
                        }
                    });
                }

                // Untuk Multi-chain (Base, BSC, dll) tanpa API Key, 
                // Kita panggil satu per satu via Public Scan API jika memungkinkan.
                // Note: Karena keterbatasan CORS, script ini bakal maksimal di Ethereum & BSC.

                if (koinData.length > 0) {
                    btnCopy.classList.remove('hidden');
                    renderTable();
                } else {
                    tableBody.innerHTML = '<tr><td colspan="4" class="p-16 text-center text-slate-600">Gak ada koin yang kedeteksi. Coba address lain.</td></tr>';
                }

            } catch (err) {
                loader.classList.add('hidden');
                alert('Gagal nembak API. Pokonya coba buka di browser lain atau pake VPN, Bro.');
            }
        }

        function tambahKoin(sym, net, bal, ca) {
            koinData.push({ symbol: sym, network: net, balance: bal, contract: ca });
        }

        function renderTable() {
            const tableBody = document.getElementById('hasil');
            tableBody.innerHTML = koinData.map(k => `
                <tr class="border-t border-white/5 hover:bg-white/5 transition-colors">
                    <td class="p-4 text-xs font-bold text-blue-400">${k.network}</td>
                    <td class="p-4 font-black">${k.symbol}</td>
                    <td class="p-4 text-right font-mono text-emerald-400 font-bold">${parseFloat(k.balance).toFixed(4)}</td>
                    <td class="p-4 text-[10px] text-slate-600 font-mono">${k.contract}</td>
                </tr>
            `).join('');
        }

        function copyData() {
            let txt = "NETWORK | TOKEN | BALANCE | CA\n";
            koinData.forEach(k => {
                txt += `${k.network} | ${k.symbol} | ${k.balance} | ${k.contract}\n`;
            });
            navigator.clipboard.writeText(txt);
            alert('Semua data berhasil di-copy!');
        }
    </script>
</body>
</html>
